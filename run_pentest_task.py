#!/usr/bin/env python
"""Run a singular task using hud-python eval"""

import json
import subprocess
import sys

with open("tasks.json") as f:
    tasks = json.load(f)

# swap out for specific task to run here
task = tasks[2] # tasks: [zero-day, one-day, full-info]

with open("single_task.json", "w") as f:
    json.dump([task], f, indent=2)

print(f"Running task: {task['id']}")
print(f"Info level: {task['info_level']}")
print(f"Prompt: {task['prompt']}\n")

cmd = [
    "hud-python", "eval", "single_task.json", "--agent", "claude",
    "--model", "claude-sonnet-4-20250514"
]

print(f"Executing: {' '.join(cmd)}\n")
result = subprocess.run(cmd)
sys.exit(result.returncode)